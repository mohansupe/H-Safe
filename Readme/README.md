# H-SAFE — Deployment & Dev Guide (Bundle 4)

This bundle contains deployment and configuration files to help you run the H-SAFE project locally and deploy to Vercel with Supabase, Clerk, and Resend email integration.

---
## Contents of this bundle
- `.env.example` — environment variable template (copy to `.env.local` locally, and set in Vercel)
- `package.json` — production-ready package manifest
- `vite.config.js` — Vite configuration
- `tailwind.config.js` — Tailwind configuration
- `postcss.config.js` — PostCSS config
- `vercel.json` — Vercel project configuration (build settings, routes)
- `Dockerfile` — optional container build for production
- `DEPLOY_INSTRUCTIONS.md` — step-by-step Vercel + Supabase + Clerk instructions
- `SECURITY_NOTES.md` — security reminders and best practices

---
## Quickstart (local)
1. Copy `.env.example` -> `.env.local` and fill values (see `.env.example`).
2. Install dependencies:
   ```bash
   npm install
   ```
3. Run development server:
   ```bash
   npm run dev
   ```
4. Build for production:
   ```bash
   npm run build
   ```
5. Preview built site:
   ```bash
   npm run preview
   ```

## Environment variables
Fill these in `.env.local` (and in Vercel project settings):

```env
# FRONTEND (public)
VITE_CLERK_PUBLISHABLE_KEY=pk_test_xxx

# BACKEND (serverless) - keep these secret in Vercel
SUPABASE_URL=https://<your-project>.supabase.co
SUPABASE_SERVICE_ROLE_KEY=service_role_xxx
RESEND_API_KEY=re_xxx
ADMIN_EMAIL=you@example.com
ADMIN_API_KEY=supersecret123
```

---
## Vercel deployment (summary)
1. Push your repo to GitHub.
2. Create a new Vercel project and import your GitHub repository.
3. In **Settings → Build & Development**, set **Install Command** to:
   ```
   npm install --include=dev
   ```
   Or set `NPM_CONFIG_PRODUCTION=false` in Environment Variables.
4. Add the environment variables listed above to Vercel (Project → Settings → Environment Variables).
5. Deploy. Visit the provided URL after the build completes.

---
## Supabase setup (SQL)
Run the following in Supabase SQL editor:
```sql
create table feedback (
  id bigint generated by default as identity primary key,
  name text not null,
  email text not null,
  message text not null,
  created_at timestamptz default now()
);

create table contact_messages (
  id bigint generated by default as identity primary key,
  name text not null,
  email text not null,
  message text not null,
  created_at timestamptz default now()
);
```

---
## Clerk setup (quick)
1. Sign up at https://clerk.com and create an application.
2. Copy the Publishable Key (pk_test...) and add to Vercel as `VITE_CLERK_PUBLISHABLE_KEY`.
3. For each admin account, set public metadata `role = "admin"` for the account(s) that should access `/admin`.

---
## Support
If you want, I can configure the GitHub repo and Vercel project for you, or help with Clerk/Supabase console steps interactively.
